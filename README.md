# Tradex API

This project contains a simple FastAPI backend for a crypto and stock trading bot. It provides JWT-based authentication, CRUD endpoints for trades stored in a Supabase database, and a Redis cache for market data.

## Setup

1. Install dependencies:
   ```bash
   pip install -r requirements.txt
   ```
   Whenever `requirements.txt` is updated, re-run the command above to reinstall
   the dependencies.
2. Create a project in [Supabase](https://supabase.com) and create the following tables:
   - `users` and `trades` matching the models in `app/schemas.py`.
   - `user_settings` using the SQL below.
3. Grab your project API URL and service role key from the Supabase dashboard and set them as environment variables:
   ```bash
   export SUPABASE_URL=https://<project-id>.supabase.co
   export SUPABASE_KEY=<your-service-role-key>
   export REDIS_URL=redis://localhost:6379/0  # optional
   export ENCRYPTION_KEY=<32-byte-base64-key>
   ```
4. Run the application:
   ```bash
   uvicorn app.main:app --reload
   ```

The API documentation is available at `/docs` when the server is running.

## Supabase SQL

Run the following SQL in Supabase to create the `user_settings` table:

```sql
create table if not exists user_settings (
  id bigint generated by default as identity primary key,
  user_id bigint not null references users(id) unique,
  binance_api_key text not null,
  binance_api_secret text not null
);
```
